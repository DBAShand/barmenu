<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>MizzouGlennâ€™s Tavern Display</title>
<link rel="stylesheet" href="/static/chalk.css">
<link rel="stylesheet" href="/static/mizzou-vintage.css">
<style>
  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    width: 100%;
    background: #000;
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  header.menu-header {
    flex: 0 0 auto;
    text-align: center;
    padding-top: 1rem;
    z-index: 10;
  }

  /* ðŸ”‘ This is the magic fix */
  #display-frame {
    flex: 1 1 auto;
    width: 100%;
    height: 100%;
    border: none;
    display: block;
  }

  iframe.fade-out {
    opacity: 0;
    transition: opacity 1s ease-in-out;
  }
</style>
</head>
<body>
  <header class="menu-header" id="tavern-header">
    <div class="mizzou-logo">
  <div class="mizzou-logo split">
  <div class="logo-left">
    <span class="tile"><span>M</span></span>
    <span class="tile"><span>I</span></span>
    <span class="tile"><span>Z</span></span>
    <span class="tile"><span>Z</span></span>
    <span class="tile"><span>O</span></span>
    <span class="tile"><span>U</span></span>
  </div>

  <div class="logo-right">
    <span class="tile"><span>G</span></span>
    <span class="tile"><span>L</span></span>
    <span class="tile"><span>E</span></span>
    <span class="tile"><span>N</span></span>
    <span class="tile"><span>N</span></span>
    <span class="tile"><span>S</span></span>
  </div>
</div>
    <div class="brand-name">Tavern</div>
  </header>

  <iframe id="display-frame" src="/beer"></iframe>
<script>
  const pages = [
    
    { name: "Beer on Tap", url: "/beer" },
    { name: "Bourbon", url: "/spirits?group=Bourbon" },
    { name: "Rye", url: "/spirits?group=Rye" },
    { name: "Scotch / Whiskey", url: "/spirits?group=Scotch%20%2F%20Whiskey" },
    { name: "Gin", url: "/spirits?group=Gin" },
    { name: "Vodka", url: "/spirits?group=Vodka" },
    { name: "Rum", url: "/spirits?group=Rum" },
    { name: "Tequila / Mezcal", url: "/spirits?group=Tequila%20%2F%20Mezcal" },
    { name: "Liqueurs & Cordials & Aperitifs & Absinthe", url: "/spirits?group=Liqueurs%20%26%20Cordials%20%26%20Aperitifs%20%26%20Absinthe" },
    { name: "House Cocktails", url: "/cocktails" },
    { name: "Seasonal Menu", url: "/seasonal" }
  ];

  const frame = document.getElementById('display-frame');
  let index = 0;

  // âœ… Dynamically measures the height of the iframe content
  function resizeFrame() {
    const header = document.getElementById('tavern-header');
    const headerHeight = header.offsetHeight;

    // Try to measure inner content height directly
    let innerHeight = 0;
    try {
      const doc = frame.contentDocument || frame.contentWindow.document;
      if (doc && doc.body) {
        innerHeight = doc.body.scrollHeight || 0;
      }
    } catch {
      innerHeight = 0;
    }

    // Take the larger of (available screen height) or (inner content height)
    const availableHeight = Math.max(window.innerHeight - headerHeight, innerHeight);
    frame.style.height = availableHeight + 'px';
  }

  window.addEventListener('load', resizeFrame);
  window.addEventListener('resize', resizeFrame);

  function rotatePage() {
    frame.classList.add('fade-out');
    setTimeout(() => {
      index = (index + 1) % pages.length;
      frame.src = pages[index].url;
    }, 1000);
  }

  frame.addEventListener('load', () => {
    resizeFrame();
    frame.classList.remove('fade-out');
  });

  // Rotate every 15s
  setInterval(rotatePage, 15000);
</script>
</body>
</html>