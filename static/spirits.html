<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ğŸ¥ƒ House Spirits â€“ MizzouGlennâ€™s Tavern</title>
<link rel="stylesheet" href="/static/chalk.css">
</head>
<body>
  <div class="board">
    <h1 class="title" id="group-name">Loading...</h1>
    <ul id="spirits"></ul>
    <div class="footer">Good Drinks. Good Company.</div>
  </div>

  <script>
  // --- Updated spirit groups ---
 const groups = {
  "ğŸ¥ƒ Bourbon": ["bourbon"],
  "ğŸ¥ƒ Rye Whiskey": ["rye"],
  "ğŸ¥ƒ Scotch / Whiskey": ["whiskey", "scotch"],
  "ğŸ¸ Gin": ["gin"],
  "ğŸ¸ Vodka": ["vodka"],
  "ğŸ Rum": ["rum"],
  "ğŸ· Liqueurs & Cordials": ["liqueur", "cream liqueur"],
  "ğŸ‡²ğŸ‡½ Tequila / Mezcal": ["tequila", "mezcal"],
  "ğŸ· Aperitifs & Absinthe": ["aperitif", "absinthe"]
};

  // get ?group= from URL (default to Bourbon if none)
  const params = new URLSearchParams(window.location.search);
  const groupParam = params.get("group") || "ğŸ¥ƒ Bourbon";

  let spiritsData = [];

  async function loadSpirits() {
    try {
      const res = await fetch('/api/spirits');
      spiritsData = await res.json();
      showGroup(groupParam);
    } catch (err) {
      document.getElementById('group-name').textContent = 'Error loading spirits';
    }
  }

  function showGroup(groupName) {
    const types = groups[groupName];
    document.getElementById('group-name').textContent = groupName;

    if (!types) {
      document.getElementById('spirits').innerHTML = `<li>Unknown group</li>`;
      return;
    }

    const filtered = spiritsData.filter(s =>
      types.some(t => s.type.toLowerCase().includes(t))
    );

    filtered.sort((a, b) => a.name.localeCompare(b.name));

    const list = document.getElementById('spirits');
    list.innerHTML = filtered.map(s =>
      `<li><span class="drink">${s.name}</span><span class="meta">${s.origin || ''}</span></li>`
    ).join('');
  }

  loadSpirits();
  </script>
</body>
</html>